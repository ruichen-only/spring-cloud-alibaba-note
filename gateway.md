# Gateway--服务网关

##  网关简介

大家都都知道在微服务架构中，一个系统会被拆分为很多个微服务。那么作为客户端要如何去调用这么
多的微服务呢？如果没有网关的存在，我们只能在客户端记录每个微服务的地址，然后分别去调用。

![](_image/网关介绍.png)

这样的架构，会存在着诸多的问题：
* 客户端多次请求不同的微服务，增加客户端代码或配置编写的复杂性
* 认证复杂，每个服务都需要独立认证。
* 存在跨域请求，在一定场景下处理相对复杂。

上面的这些问题可以借助**API网关**来解决。
所谓的API网关，就是指系统的**统一入口**，它封装了应用程序的内部结构，为客户端提供统一服务，一
些与业务本身功能无关的公共逻辑可以在这里实现，诸如认证、鉴权、监控、路由转发等等。
添加上API网关之后，系统的架构图变成了如下所示：

![](_image/网关介绍2.png)

**我们也可以观察下，我们现在的整体架构图**

![](_image/网关介绍3.png)

流行的网关比较

| |spring cloud gateway| zuul|
|--|---|---|
| 性能|性能比zuul好将近一倍| zuul1性能较差，zuul2较1有较大的提升|
| 社区和文档|spring社区非常活跃| 一般|
| 可维护性|基于spring官方维护性强| 经常跳票，spring cloud暂时还没有对zuul2的整合计划|
| 亮点|异步，配置灵活| 成熟，简单门槛低|
| 不足|早期产品，新版本踩坑| 性能一般，可编程一般|

> SpringCloud alibaba技术栈中并没有提供自己的网关，我们可以采用Spring Cloud Gateway来做网关

## Gateway简介

pring Cloud Gateway是Spring公司基于Spring 5.0，Spring Boot 2.0 和 Project Reactor 等技术开发
的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。它的目标是替代Netflflix
Zuul，其不仅提供统一的路由方式，并且基于 Filter 链的方式提供了网关基本的功能，例如：安全，监
控和限流。

**优点**：
* **性能强劲**：是第一代网关Zuul的1.6倍
* **功能强大**：内置了很多实用的功能，例如转发、监控、限流等
* **设计优雅**，容易扩展

缺点：
* 其实现依赖Netty与WebFlux，不是传统的Servlet编程模型，学习成本高
* 不能将其部署在Tomcat、Jetty等Servlet容器里，只能打成jar包执行
* 需要Spring Boot 2.0及以上的版本，才支持

## Gateway快速入门







